{% extends "base.html" %}
{% block title %}{{ title }} | {{ 'Sistema de Gestão de OTIF - Aryzta - Invent ' }}{% endblock %}
{% block branding %}
<h1 id="site-name"><a href="">Invent - Sistema de Gestão de OTIF</a></h1>
{% endblock %}
{% load i18n admin_urls admin_static admin_list %}

{% block breadcrumbs %}
    <a href="{{ SERVER_URL }}/">Início</a>&nbsp> <a href="{{ SERVER_URL }}/report/">Relatórios</a>
{% endblock %}

{% block content_title %}Relatório de Treinamentos por Funcionário{% endblock %}
{% block content %}

<div class="module filtered" id="changelist">
<div id="toolbar">
    <div id="searchform">
    <form id="changelist-search" action="." method="get">
        <br>
        &nbspPeríodo de treinamento entre:
        <br>
        &nbspData Inicial:
        <input lang="pt-BR" type="text" value="01/01/2000" name="start_date" placeholder="DD/MM/YYYY" required pattern="[0-9]{2}/[0-9]{2}/[0-9]{4}" title="Entre uma data no formato dd/mm/yyyy" size="12"/>
        Data Final:
        <input lang="pt-BR" type="text" value="{% now 'SHORT_DATE_FORMAT' %}" name="end_date" placeholder="DD/MM/YYYY" required pattern="[0-9]{2}/[0-9]{2}/[0-9]{4}" title="Entre uma data no formato dd/mm/yyyy" size="12" ><br>
        <br>
        &nbspNome do Funcionário<br>
        <label for="searchbar"><img src="{% static 'admin/img/icon_searchbox.png' %}" alt="Search" /></label>
        <input type="text" size="40" name="q" value="" id="searchbar" placeholder="Todos" />
        <input type="submit" value="Selecionar" />
    </form>
</div>
<div>
    <p><h2>Funcionários com Treinamentos realizados no Período de {{ start_date|date:'d/m/Y' }} a {{ end_date|date:'d/m/Y' }}</h2></p>
</div>

 <table class="orderable">
        <tr>
            <td><strong>Matrícula</strong></td>
            <td><strong>Nome</strong></td>
            <td><strong>Horas de treinamento</strong></td>
        </tr>

    {% for fu in total_horas_por_funcionario %}
    <tr>
        <td>{{ fu.funcionario__matricula }}</td>
        <td><a href="{{ fu.funcionario__id }}" target="_blank">{{ fu.funcionario__nome }}</a></td>

        <td>{{ fu.total_horas | default_if_none:0.0}}</td>
    </tr>
    {% endfor %}

    <tr>
        <td align="right"><strong>Total =></strong></td>
        <td><strong>{{ total_horas }} hs</strong></td>
    </tr>
  </table>
    {% endblock content %}
        </form>
    </div>
</div>